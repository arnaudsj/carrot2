
<project name="a" default="build">
	<target name="clean">
		<delete dir="tmp" />
	</target>

	<target name="deps">
        <taskdef resource="res/carrot2-antlib.xml" />

		<dependency-path id="dependencies">
            <fileset dir="..">
                <include name="**/*.dep.xml" />
            </fileset>
		</dependency-path>

		<bringToDate componentDescriptor="a.dep.xml" dependenciesOnly="true" profile="">
			<dependencies refid="dependencies" />
		</bringToDate>

		<component-path id="path.dependencies"
			componentDescriptor="a.dep.xml" profile="">
			<dependencies refid="dependencies" />
		</component-path>
	</target>

	<target name="build" depends="deps">
		<mkdir dir="tmp/classes" />

		<copy todir="src" includeemptydirs="false">
			<fileset dir="src" />
			<mapper type="glob" from="*.java.ext" to="*.java"/>
		</copy>

		<javac srcdir="src" destdir="tmp/classes" debug="on">
  			<classpath refid="path.dependencies" />
  		</javac>

  		<jar destfile="tmp/a.jar" basedir="tmp/classes"/>
	</target>
</project>